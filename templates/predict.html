{% extends "base.html" %}
{% block content %}
    <h1>ðŸ¤– Predict Insurance Outcome</h1>
    <p style="font-size:1.1rem; color:#444;">Enter customer details below and get instant predictions!</p>
    <form id="predictForm" style="margin-top:1.5rem;">
        <div style="display:grid; grid-template-columns:1fr 1fr; gap:1rem;">
            <input type="text" name="Gender" placeholder="Gender (Male/Female)" required class="btn" style="background:#e3f2fd; color:#1976d2;"/>
            <input type="number" name="Age" placeholder="Age" required class="btn" style="background:#e3f2fd; color:#1976d2;"/>
            <input type="number" name="Driving_License" placeholder="Driving License (0/1)" required class="btn" style="background:#e3f2fd; color:#1976d2;"/>
            <input type="number" name="Region_Code" placeholder="Region Code" required class="btn" style="background:#e3f2fd; color:#1976d2;"/>
            <input type="number" name="Previously_Insured" placeholder="Previously Insured (0/1)" required class="btn" style="background:#e3f2fd; color:#1976d2;"/>
            <input type="text" name="Vehicle_Age" placeholder="Vehicle Age (< 1 Year/> 2 Years)" required class="btn" style="background:#e3f2fd; color:#1976d2;"/>
            <input type="text" name="Vehicle_Damage" placeholder="Vehicle Damage (Yes/No)" required class="btn" style="background:#e3f2fd; color:#1976d2;"/>
            <input type="number" name="Annual_Premium" placeholder="Annual Premium" required class="btn" style="background:#e3f2fd; color:#1976d2;"/>
            <input type="number" name="Policy_Sales_Channel" placeholder="Policy Sales Channel" required class="btn" style="background:#e3f2fd; color:#1976d2;"/>
            <input type="number" name="Vintage" placeholder="Vintage" required class="btn" style="background:#e3f2fd; color:#1976d2;"/>
        </div>
        <button type="submit" class="btn" style="margin-top:1.5rem;">Predict</button>
    </form>
    <div id="result" style="margin-top:2rem; font-size:1.2rem; color:#388e3c;"></div>
    <img src="https://img.icons8.com/color/96/000000/api.png" style="margin:2rem auto; display:block;"/>
    <script>
        document.getElementById('predictForm').onsubmit = async function(e) {
            e.preventDefault();
            const form = e.target;
            const data = {};
            for (const el of form.elements) {
                if (el.name) data[el.name] = el.value;
            }
            const res = await fetch('/predict', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(data)
            });
            const out = await res.json();
            document.getElementById('result').innerHTML = out.predictions ? `Prediction: <b>${out.predictions}</b>` : `<span style='color:red;'>${out.error}</span>`;
        };
    </script>
{% endblock %}
